<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>毎月タスク</title>
  <!-- CSS -->
  <link rel="stylesheet" href="./css/common.css">
  <link rel="stylesheet" href="./css/navbar.css">
  <link rel="stylesheet" href="./css/buttons.css">
  <link rel="stylesheet" href="./css/table.css">
  <link rel="stylesheet" href="./css/taskform.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP&display=swap" rel="stylesheet">
</head>
<body>
  <!-- ナビバー -->
  <div class="sidebar">
    <h2>メニュー</h2>
    <ul>
      <li><a href="index.html">今日のタスク</a></li>
      <li><a href="dailyTask.html">毎日のタスク</a></li>
      <li><a href="weeklyTask.html">毎週のタスク</a></li>
      <li><a href="monthlyTask.html">毎月のタスク</a></li>
    </ul>
  </div>

  <!-- メインコンテンツ -->
  <div class="main">
    <h1>毎月のタスクを登録しましょう！</h1>

    <table class="table-task">
      <thead>
        <tr>
          <th style="width: 350px;">タスク</th>
          <th style="width: 40px;">日付</th>
          <th style="width: 70px;">開始時間</th>
          <th style="width: 70px;">終了時間</th>
          <th style="width: 40px;">期限</th>
          <th style="width: 100px;">操作</th>
        </tr>
      </thead>
      <tbody id="task-tbody"><!-- JSで自動生成 --></tbody>
    </table>

  <!-- 行テンプレート -->
  <template id="task-row-template">
    <tr>
      <td class="cell-task"></td>
      <td class="cell-startday"></td>
      <td class="cell-start"></td>
      <td class="cell-end"></td>
      <td class="cell-deadline"></td>
      <td>
        <button class="btn btn-sm" data-action="edit">編集</button>
        <button class="btn btn-sm" data-action="delete">削除</button>
      </td>
    </tr>
  </template>

    <!-- メッセージ表示エリア -->
    <div id="task-empty-message" class="empty-message" style="display:none;">
      タスクを追加しよう！
    </div>
    <!-- 追加ボタン -->
    <button class="add-btn" id="add-task" data-repeat="monthly">+</button>
  </div>

  <!-- モーダル本体 -->
  <div id="task-modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="task-modal-title">
    <!-- オーバーレイ -->
    <div class="modal__overlay" data-close-modal></div>

    <!-- コンテンツ -->
    <div class="modal__content">
      <header class="modal__header">
        <h2 id="task-modal-title">タスクを追加</h2>

        <!-- 繰り返し設定 -->
        <label class="repeat-label">
          繰り返し
          <select name="repeat">
            <option value="none">なし</option>
            <option value="daily">毎日</option>
            <option value="weekly">毎週</option>
            <option value="monthly">毎月</option>
          </select>
        </label>
        
        <button type="button" class="modal__close" aria-label="閉じる" data-close-modal>×</button>
      </header>

      <!-- モーダル内フォーム -->
      <form id="task-form" class="modal__form">
        <input type="hidden" name="id">
        <div id="form-error" class="form-error"></div>

        <label>タスク名<input type="text" name="title" required minlength="2" maxlength="50"></label>
          <label id="weekday">
            曜日
            <select name="weekday" style="width:25%;">
              <option value="1">月</option>
              <option value="2">火</option>
              <option value="3">水</option>
              <option value="4">木</option>
              <option value="5">金</option>
              <option value="6">土</option>
            </select>
          </label>
          <label id="start-day">
            開始日
            <select name="monthlyStart" style="width:25%;">
              <option value="1">1日</option>
              <option value="2">2日</option>
              <option value="3">3日</option>
              <option value="4">4日</option>
              <option value="5">5日</option>
              <option value="6">6日</option>
              <option value="7">7日</option>
              <option value="8">8日</option>
              <option value="9">9日</option>
              <option value="10">10日</option>
              <option value="11">11日</option>
              <option value="12">12日</option>
              <option value="13">13日</option>
              <option value="14">14日</option>
              <option value="15">15日</option>
              <option value="16">16日</option>
              <option value="17">17日</option>
              <option value="18">18日</option>
              <option value="19">19日</option>
              <option value="20">20日</option>
              <option value="21">21日</option>
              <option value="22">22日</option>
              <option value="23">23日</option>
              <option value="24">24日</option>
              <option value="25">25日</option>
              <option value="26">26日</option>
              <option value="27">27日</option>
              <option value="28">28日</option>
              <option value="29">29日</option>
              <option value="30">30日</option>
              <option value="31">31日</option>
            </select>
          </label>
          <div id="time-row" class="time-row">
            <label>開始時間<input type="time" name="startTime" value="09:00"></label>
            <label>終了時間<input type="time" name="endTime" value="09:30"></label>
          </div>
          <label id="deadline">期限<input type="date" name="deadline" style="width:45%;"></label>
          <label id="weekly-deadline">
            期限までの日数
            <select name="Weeklydeadline" style="width:25%;">
              <option value="0">期限なし（当日）</option>
              <option value="1">1日後</option>
              <option value="2">2日後</option>
              <option value="3">3日後</option>
              <option value="4">4日後</option>
              <option value="5">5日後</option>
              <option value="6">6日後</option>
            </select>
          </label>
          <label id="monthly-deadline">
            期限日
            <select name="monthlyDeadline" style="width:25%;">
              <option value="1">1日</option>
              <option value="2">2日</option>
              <option value="3">3日</option>
              <option value="4">4日</option>
              <option value="5">5日</option>
              <option value="6">6日</option>
              <option value="7">7日</option>
              <option value="8">8日</option>
              <option value="9">9日</option>
              <option value="10">10日</option>
              <option value="11">11日</option>
              <option value="12">12日</option>
              <option value="13">13日</option>
              <option value="14">14日</option>
              <option value="15">15日</option>
              <option value="16">16日</option>
              <option value="17">17日</option>
              <option value="18">18日</option>
              <option value="19">19日</option>
              <option value="20">20日</option>
              <option value="21">21日</option>
              <option value="22">22日</option>
              <option value="23">23日</option>
              <option value="24">24日</option>
              <option value="25">25日</option>
              <option value="26">26日</option>
              <option value="27">27日</option>
              <option value="28">28日</option>
              <option value="29">29日</option>
              <option value="30">30日</option>
              <option value="31">31日</option>
            </select>
          </label>
        <label>メモ<textarea name="notes" rows="3"></textarea></label>
        <footer class="modal__actions">
          <button type="button" class="btn btn-sm" data-close-modal>キャンセル</button>
          <button type="submit" class="btn btn-sm" id="task-submit">追加</button>
        </footer>
      </form>
    </div>
  </div>

  <script src="./js/taskRepository.js"></script>
  <script src="./js/taskForm.js"></script>
  <script src="./js/monthlyTaskPage.js"></script>

</body>
</html>